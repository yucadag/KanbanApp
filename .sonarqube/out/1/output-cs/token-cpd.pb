ä?
\C:\TFSProjects\KanbanApp\KanbanApp.Core\DataAccess\EntityFramework\EfEntityRepositoryBase.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 

DataAccess #
.# $
EntityFramework$ 3
{		 
public

 

class

 "
EfEntityRepositoryBase

 '
<

' (
TEntity

( /
>

/ 0
:

1 2
IEntityRepository

3 D
<

D E
TEntity

E L
>

L M
where 
TEntity 
: 
class 
, 
IEntity &
,& '
new( +
(+ ,
), -
{ 
private 
readonly 
	DbContext "
_context# +
;+ ,
public "
EfEntityRepositoryBase %
(% &
	DbContext& /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
TEntity 
Get 
( 

Expression %
<% &
Func& *
<* +
TEntity+ 2
,2 3
bool4 8
>8 9
>9 :
filter; A
=B C
nullD H
)H I
{ 	
return 
_context 
. 
Set 
<  
TEntity  '
>' (
(( )
)) *
.* +
SingleOrDefault+ :
(: ;
filter; A
)A B
;B C
} 	
public 
List 
< 
TEntity 
> 
GetList $
($ %

Expression% /
</ 0
Func0 4
<4 5
TEntity5 <
,< =
bool> B
>B C
>C D
filterE K
=L M
nullN R
)R S
{   	
return"" 
filter"" 
=="" 
null"" !
?## 
_context## 
.## 
Set## 
<## 
TEntity## &
>##& '
(##' (
)##( )
.##) *
ToList##* 0
(##0 1
)##1 2
:$$ 
_context$$ 
.$$ 
Set$$ 
<$$ 
TEntity$$ &
>$$& '
($$' (
)$$( )
.$$) *
Where$$* /
($$/ 0
filter$$0 6
)$$6 7
.$$7 8
ToList$$8 >
($$> ?
)$$? @
;$$@ A
}&& 	
public(( 

IQueryable(( 
<(( 
TEntity(( !
>((! "
GetPagedList((# /
(((/ 0

Expression((0 :
<((: ;
Func((; ?
<((? @
TEntity((@ G
,((G H
bool((I M
>((M N
>((N O
	predicate((P Y
,((Y Z
int(([ ^

PageNumber((_ i
,((i j
int((k n
PageSize((o w
)((w x
{)) 	
var** 
query** 
=** 
_context**  
.**  !
Set**! $
<**$ %
TEntity**% ,
>**, -
(**- .
)**. /
.**/ 0
AsQueryable**0 ;
(**; <
)**< =
;**= >
if,, 
(,, 
	predicate,, 
!=,, 
null,, !
),,! "
{-- 
query.. 
=.. 
query.. 
... 
Where.. #
(..# $
	predicate..$ -
)..- .
;... /
}// 
var22 
skip22 
=22 
(22 

PageNumber22 "
-22# $
$num22% &
)22& '
*22( )
PageSize22* 2
;222 3
query33 
=33 
query33 
.33 
Skip33 
(33 
skip33 #
)33# $
.33$ %
Take33% )
(33) *
PageSize33* 2
)332 3
;333 4
return66 
query66 
.66 
AsNoTracking66 %
(66% &
)66& '
;66' (
}77 	
public99 
TEntity99 
Add99 
(99 
TEntity99 "
entity99# )
)99) *
{:: 	
var<< 
addedEntity<< 
=<< 
_context<< &
.<<& '
Entry<<' ,
(<<, -
entity<<- 3
)<<3 4
;<<4 5
addedEntity== 
.== 
State== 
=== 
EntityState==  +
.==+ ,
Added==, 1
;==1 2
_context>> 
.>> 
SaveChanges>>  
(>>  !
)>>! "
;>>" #
return?? 
entity?? 
;?? 
}AA 	
publicCC 
voidCC 
UpdateCC 
(CC 
TEntityCC "
entityCC# )
)CC) *
{DD 	
varFF 
updatedEntityFF 
=FF 
_contextFF  (
.FF( )
EntryFF) .
(FF. /
entityFF/ 5
)FF5 6
;FF6 7
updatedEntityGG 
.GG 
StateGG 
=GG  !
EntityStateGG" -
.GG- .
ModifiedGG. 6
;GG6 7
_contextHH 
.HH 
SaveChangesHH  
(HH  !
)HH! "
;HH" #
}JJ 	
publicLL 
voidLL 
DeleteLL 
(LL 
TEntityLL "
entityLL# )
)LL) *
{MM 	
varOO 
deleteEntityOO 
=OO 
_contextOO '
.OO' (
EntryOO( -
(OO- .
entityOO. 4
)OO4 5
;OO5 6
deleteEntityPP 
.PP 
StatePP 
=PP  
EntityStatePP! ,
.PP, -
DeletedPP- 4
;PP4 5
_contextQQ 
.QQ 
SaveChangesQQ  
(QQ  !
)QQ! "
;QQ" #
}SS 	
publicUU 
asyncUU 
TaskUU 
<UU 
TEntityUU !
>UU! "
GetAsyncUU# +
(UU+ ,

ExpressionUU, 6
<UU6 7
FuncUU7 ;
<UU; <
TEntityUU< C
,UUC D
boolUUE I
>UUI J
>UUJ K
filterUUL R
=UUS T
nullUUU Y
)UUY Z
{VV 	
returnXX 
awaitXX 
_contextXX !
.XX! "
SetXX" %
<XX% &
TEntityXX& -
>XX- .
(XX. /
)XX/ 0
.XX0 1 
SingleOrDefaultAsyncXX1 E
(XXE F
filterXXF L
)XXL M
;XXM N
}ZZ 	
public\\ 
Task\\ 
<\\ 
List\\ 
<\\ 
TEntity\\  
>\\  !
>\\! "
GetListAsync\\# /
(\\/ 0

Expression\\0 :
<\\: ;
Func\\; ?
<\\? @
TEntity\\@ G
,\\G H
bool\\I M
>\\M N
>\\N O
filter\\P V
=\\W X
null\\Y ]
)\\] ^
{]] 	
throw^^ 
new^^ #
NotImplementedException^^ -
(^^- .
)^^. /
;^^/ 0
}__ 	
publicaa 
Taskaa 
<aa 
TEntityaa 
>aa 
AddAsyncaa %
(aa% &
TEntityaa& -
entityaa. 4
)aa4 5
{bb 	
throwcc 
newcc #
NotImplementedExceptioncc -
(cc- .
)cc. /
;cc/ 0
}dd 	
publicff 
Taskff 
UpdateAsyncff 
(ff  
TEntityff  '
entityff( .
)ff. /
{gg 	
throwhh 
newhh #
NotImplementedExceptionhh -
(hh- .
)hh. /
;hh/ 0
}ii 	
publickk 
Taskkk 
DeleteAsynckk 
(kk  
TEntitykk  '
entitykk( .
)kk. /
{ll 	
throwmm 
newmm #
NotImplementedExceptionmm -
(mm- .
)mm. /
;mm/ 0
}nn 	
}oo 
}pp »
GC:\TFSProjects\KanbanApp\KanbanApp.Core\DataAccess\IEntityRepository.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 

DataAccess #
{ 
public 

	interface 
IEntityRepository &
<& '
T' (
>( )
where* /
T0 1
:2 3
class4 9
,9 :
IEntity; B
,B C
newD G
(G H
)H I
{		 
T

 	
Get


 
(

 

Expression

 
<

 
Func

 
<

 
T

 
,

  
bool

! %
>

% &
>

& '
filter

( .
=

/ 0
null

1 5
)

5 6
;

6 7
Task 
< 
T 
> 
GetAsync 
( 

Expression #
<# $
Func$ (
<( )
T) *
,* +
bool, 0
>0 1
>1 2
filter3 9
=: ;
null< @
)@ A
;A B
List 
< 
T 
> 
GetList 
( 

Expression "
<" #
Func# '
<' (
T( )
,) *
bool+ /
>/ 0
>0 1
filter2 8
=9 :
null; ?
)? @
;@ A
Task 
< 
List 
< 
T 
> 
> 
GetListAsync "
(" #

Expression# -
<- .
Func. 2
<2 3
T3 4
,4 5
bool6 :
>: ;
>; <
filter= C
=D E
nullF J
)J K
;K L
T 	
Add
 
( 
T 
entity 
) 
; 
Task 
< 
T 
> 
AddAsync 
( 
T 
entity !
)! "
;" #
void 
Update 
( 
T 
entity 
) 
; 
Task 
UpdateAsync 
( 
T 
entity !
)! "
;" #
void 
Delete 
( 
T 
entity 
) 
; 
Task 
DeleteAsync 
( 
T 
entity !
)! "
;" #
} 
}   
AC:\TFSProjects\KanbanApp\KanbanApp.Core\DataAccess\IUnitOfWork.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 

DataAccess #
{ 
public 

	interface 
IUnitOfWork  
{ 
Task 
CompleteAsync 
( 
) 
; 
} 
}		 ù
2C:\TFSProjects\KanbanApp\KanbanApp.Core\IEntity.cs
	namespace 	
	KanbanApp
 
. 
Core 
{ 
public 

	interface 
IEntity 
{ 
} 
} 
:C:\TFSProjects\KanbanApp\KanbanApp.Core\Mapping\IMapper.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 
Mapping  
{ 
public 

	interface 
IMapper1 
{ 
TDestination 
Map 
< 
TSource  
,  !
TDestination" .
>. /
(/ 0
TSource0 7
source8 >
)> ?
;? @
} 
} ­
;C:\TFSProjects\KanbanApp\KanbanApp.Core\Paging\PagedList.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 
Paging 
{ 
public 

class 
	PagedList 
< 
T 
> 
: 
List  $
<$ %
T% &
>& '
{ 
public		 
int		 
CurrentPage		 
{		  
get		! $
;		$ %
private		& -
set		. 1
;		1 2
}		3 4
public

 
int

 

TotalPages

 
{

 
get

  #
;

# $
private

% ,
set

- 0
;

0 1
}

2 3
public 
int 
PageSize 
{ 
get !
;! "
private# *
set+ .
;. /
}0 1
public 
int 

TotalCount 
{ 
get  #
;# $
private% ,
set- 0
;0 1
}2 3
public 
bool 
HasPrevious 
=>  "
CurrentPage# .
>/ 0
$num1 2
;2 3
public 
bool 
HasNext 
=> 
CurrentPage *
<+ ,

TotalPages- 7
;7 8
public 
	PagedList 
( 
List 
< 
T 
>  
items! &
,& '
int( +
count, 1
,1 2
int3 6

pageNumber7 A
,A B
intC F
pageSizeG O
)O P
{ 	

TotalCount 
= 
count 
; 
PageSize 
= 
pageSize 
;  
CurrentPage 
= 

pageNumber $
;$ %

TotalPages 
= 
( 
int 
) 
Math "
." #
Ceiling# *
(* +
count+ 0
/1 2
(3 4
double4 :
): ;
pageSize; C
)C D
;D E
AddRange 
( 
items 
) 
; 
} 	
public 
static 
	PagedList 
<  
T  !
>! "
ToPagedList# .
(. /

IQueryable/ 9
<9 :
T: ;
>; <
source= C
,C D
intE H

pageNumberI S
,S T
intU X
pageSizeY a
,a b
intb e
countf k
)k l
{ 	
var 
items 
= 
source 
. 
ToList %
(% &
)& '
;' (
return 
new 
	PagedList  
<  !
T! "
>" #
(# $
items$ )
,) *
count+ 0
,0 1

pageNumber2 <
,< =
pageSize> F
)F G
;G H
}   	
}!! 
}"" ¥	
EC:\TFSProjects\KanbanApp\KanbanApp.Core\Paging\PagingParameterBase.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 
Paging 
{ 
public 

class 
PagingParameterBase $
{ 
const 
int 
maxPageSize 
= 
$num  "
;" #
public 
int 

PageNumber 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
$num. /
;/ 0
private 
int 
	_pageSize 
= 
$num  "
;" #
public 
int 
PageSize 
{		 	
get

 
{ 
return 
	_pageSize  
;  !
} 
set 
{ 
	_pageSize 
= 
( 
value "
># $
maxPageSize% 0
)0 1
?2 3
maxPageSize4 ?
:@ A
valueB G
;G H
} 
} 	
} 
} óC
EC:\TFSProjects\KanbanApp\KanbanApp.Core\Predicate\PredicateBuilder.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 
	Predicate "
{ 
public 

static 
class 
PredicateBuilder (
{ 
public 
static 

Expression  
<  !
Func! %
<% &
T& '
,' (
bool) -
>- .
>. /
True0 4
<4 5
T5 6
>6 7
(7 8
)8 9
{: ;
return< B
paramC H
=>I K
trueL P
;P Q
}R S
public 
static 

Expression  
<  !
Func! %
<% &
T& '
,' (
bool) -
>- .
>. /
False0 5
<5 6
T6 7
>7 8
(8 9
)9 :
{; <
return= C
paramD I
=>J L
falseM R
;R S
}T U
public 
static 

Expression  
<  !
Func! %
<% &
T& '
,' (
bool) -
>- .
>. /
Create0 6
<6 7
T7 8
>8 9
(9 :

Expression: D
<D E
FuncE I
<I J
TJ K
,K L
boolM Q
>Q R
>R S
	predicateT ]
)] ^
{_ `
returna g
	predicateh q
;q r
}s t
public 
static 

Expression  
<  !
Func! %
<% &
T& '
,' (
bool) -
>- .
>. /
And0 3
<3 4
T4 5
>5 6
(6 7
this7 ;

Expression< F
<F G
FuncG K
<K L
TL M
,M N
boolO S
>S T
>T U
firstV [
,[ \

Expression] g
<g h
Funch l
<l m
Tm n
,n o
boolp t
>t u
>u v
secondw }
)} ~
{   	
return!! 
first!! 
.!! 
Compose!!  
(!!  !
second!!! '
,!!' (

Expression!!) 3
.!!3 4
AndAlso!!4 ;
)!!; <
;!!< =
}"" 	
public'' 
static'' 

Expression''  
<''  !
Func''! %
<''% &
T''& '
,''' (
bool'') -
>''- .
>''. /
Or''0 2
<''2 3
T''3 4
>''4 5
(''5 6
this''6 :

Expression''; E
<''E F
Func''F J
<''J K
T''K L
,''L M
bool''N R
>''R S
>''S T
first''U Z
,''Z [

Expression''\ f
<''f g
Func''g k
<''k l
T''l m
,''m n
bool''o s
>''s t
>''t u
second''v |
)''| }
{(( 	
return)) 
first)) 
.)) 
Compose))  
())  !
second))! '
,))' (

Expression))) 3
.))3 4
OrElse))4 :
))): ;
;)); <
}** 	
public// 
static// 

Expression//  
<//  !
Func//! %
<//% &
T//& '
,//' (
bool//) -
>//- .
>//. /
Not//0 3
<//3 4
T//4 5
>//5 6
(//6 7
this//7 ;

Expression//< F
<//F G
Func//G K
<//K L
T//L M
,//M N
bool//O S
>//S T
>//T U

expression//V `
)//` a
{00 	
var11 
negated11 
=11 

Expression11 $
.11$ %
Not11% (
(11( )

expression11) 3
.113 4
Body114 8
)118 9
;119 :
return22 

Expression22 
.22 
Lambda22 $
<22$ %
Func22% )
<22) *
T22* +
,22+ ,
bool22- 1
>221 2
>222 3
(223 4
negated224 ;
,22; <

expression22= G
.22G H

Parameters22H R
)22R S
;22S T
}33 	
static88 

Expression88 
<88 
T88 
>88 
Compose88 $
<88$ %
T88% &
>88& '
(88' (
this88( ,

Expression88- 7
<887 8
T888 9
>889 :
first88; @
,88@ A

Expression88B L
<88L M
T88M N
>88N O
second88P V
,88V W
Func88X \
<88\ ]

Expression88] g
,88g h

Expression88i s
,88s t

Expression88u 
>	88 
merge
88 
)
88 
{99 	
var;; 
map;; 
=;; 
first;; 
.;; 

Parameters;; &
.<< 
Select<< 
(<< 
(<< 
f<< 
,<< 
i<< 
)<< 
=><< !
new<<" %
{<<& '
f<<( )
,<<) *
s<<+ ,
=<<- .
second<</ 5
.<<5 6

Parameters<<6 @
[<<@ A
i<<A B
]<<B C
}<<D E
)<<E F
.== 
ToDictionary== 
(== 
p== 
=>==  "
p==# $
.==$ %
s==% &
,==& '
p==( )
=>==* ,
p==- .
.==. /
f==/ 0
)==0 1
;==1 2
var@@ 

secondBody@@ 
=@@ 
ParameterRebinder@@ .
.@@. /
ReplaceParameters@@/ @
(@@@ A
map@@A D
,@@D E
second@@F L
.@@L M
Body@@M Q
)@@Q R
;@@R S
returnCC 

ExpressionCC 
.CC 
LambdaCC $
<CC$ %
TCC% &
>CC& '
(CC' (
mergeCC( -
(CC- .
firstCC. 3
.CC3 4
BodyCC4 8
,CC8 9

secondBodyCC: D
)CCD E
,CCE F
firstCCG L
.CCL M

ParametersCCM W
)CCW X
;CCX Y
}DD 	
classFF 
ParameterRebinderFF 
:FF  !
ExpressionVisitorFF" 3
{GG 	
readonlyHH 

DictionaryHH 
<HH  
ParameterExpressionHH  3
,HH3 4
ParameterExpressionHH5 H
>HHH I
mapHHJ M
;HHM N
ParameterRebinderJJ 
(JJ 

DictionaryJJ (
<JJ( )
ParameterExpressionJJ) <
,JJ< =
ParameterExpressionJJ> Q
>JJQ R
mapJJS V
)JJV W
{KK 
thisLL 
.LL 
mapLL 
=LL 
mapLL 
??LL !
newLL" %

DictionaryLL& 0
<LL0 1
ParameterExpressionLL1 D
,LLD E
ParameterExpressionLLF Y
>LLY Z
(LLZ [
)LL[ \
;LL\ ]
}MM 
publicOO 
staticOO 

ExpressionOO $
ReplaceParametersOO% 6
(OO6 7

DictionaryOO7 A
<OOA B
ParameterExpressionOOB U
,OOU V
ParameterExpressionOOW j
>OOj k
mapOOl o
,OOo p

ExpressionOOq {
expOO| 
)	OO 
{PP 
returnQQ 
newQQ 
ParameterRebinderQQ ,
(QQ, -
mapQQ- 0
)QQ0 1
.QQ1 2
VisitQQ2 7
(QQ7 8
expQQ8 ;
)QQ; <
;QQ< =
}RR 
	protectedTT 
overrideTT 

ExpressionTT )
VisitParameterTT* 8
(TT8 9
ParameterExpressionTT9 L
nodeTTM Q
)TTQ R
{UU 
ParameterExpressionVV #
replacementVV$ /
;VV/ 0
ifXX 
(XX 
mapXX 
.XX 
TryGetValueXX #
(XX# $
nodeXX$ (
,XX( )
outXX* -
replacementXX. 9
)XX9 :
)XX: ;
{YY 
nodeZZ 
=ZZ 
replacementZZ &
;ZZ& '
}[[ 
return]] 
base]] 
.]] 
VisitParameter]] *
(]]* +
node]]+ /
)]]/ 0
;]]0 1
}^^ 
}__ 	
}`` 
}aa Ä%
8C:\TFSProjects\KanbanApp\KanbanApp.Core\Result\Either.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 
Result 
{ 
public 

class 
Either 
< 
TL 
, 
TR 
> 
{ 
private 
readonly 
TL 
_left !
;! "
private 
readonly 
TR 
_right "
;" #
private 
readonly 
bool 
_isLeft %
;% &
public 
Either 
( 
TL 
left 
) 
{ 	
_left 
= 
left 
; 
_isLeft 
= 
true 
; 
} 	
public 
Either 
( 
TR 
right 
) 
{ 	
_right 
= 
right 
; 
_isLeft 
= 
false 
; 
} 	
public 
T 
Match 
< 
T 
> 
( 
Func 
< 
TL !
,! "
T# $
>$ %
leftFunc& .
,. /
Func0 4
<4 5
TR5 7
,7 8
T9 :
>: ;
	rightFunc< E
)E F
{ 	
if 
( 
ReferenceEquals 
(  
leftFunc  (
,( )
null* .
). /
)/ 0
throw   
new   !
ArgumentNullException   /
(  / 0
nameof  0 6
(  6 7
leftFunc  7 ?
)  ? @
)  @ A
;  A B
if"" 
("" 
ReferenceEquals"" 
(""  
	rightFunc""  )
,"") *
null""+ /
)""/ 0
)""0 1
throw## 
new## !
ArgumentNullException## /
(##/ 0
nameof##0 6
(##6 7
	rightFunc##7 @
)##@ A
)##A B
;##B C
return%% 
_isLeft%% 
?%% 
leftFunc%% %
(%%% &
_left%%& +
)%%+ ,
:%%- .
	rightFunc%%/ 8
(%%8 9
_right%%9 ?
)%%? @
;%%@ A
}&& 	
public,, 
void,, 
DoRight,, 
(,, 
Action,, "
<,," #
TR,,# %
>,,% &
rightAction,,' 2
),,2 3
{-- 	
if.. 
(.. 
ReferenceEquals.. 
(..  
rightAction..  +
,..+ ,
null..- 1
)..1 2
)..2 3
throw// 
new// !
ArgumentNullException// /
(/// 0
nameof//0 6
(//6 7
rightAction//7 B
)//B C
)//C D
;//D E
if11 
(11 
!11 
_isLeft11 
)11 
rightAction22 
(22 
_right22 "
)22" #
;22# $
}33 	
public55 
TL55 
LeftOrDefault55 
(55  
)55  !
=>55" $
Match55% *
(55* +
l55+ ,
=>55- /
l550 1
,551 2
r553 4
=>555 7
default558 ?
(55? @
TL55@ B
)55B C
)55C D
;55D E
public77 
TR77 
RightOrDefault77  
(77  !
)77! "
=>77# %
Match77& +
(77+ ,
l77, -
=>77. 0
default771 8
(778 9
TR779 ;
)77; <
,77< =
r77> ?
=>77@ B
r77C D
)77D E
;77E F
public99 
static99 
implicit99 
operator99 '
Either99( .
<99. /
TL99/ 1
,991 2
TR993 5
>995 6
(996 7
TL997 9
left99: >
)99> ?
=>99@ B
new99C F
Either99G M
<99M N
TL99N P
,99P Q
TR99R T
>99T U
(99U V
left99V Z
)99Z [
;99[ \
public;; 
static;; 
implicit;; 
operator;; '
Either;;( .
<;;. /
TL;;/ 1
,;;1 2
TR;;3 5
>;;5 6
(;;6 7
TR;;7 9
right;;: ?
);;? @
=>;;A C
new;;D G
Either;;H N
<;;N O
TL;;O Q
,;;Q R
TR;;S U
>;;U V
(;;V W
right;;W \
);;\ ]
;;;] ^
}<< 
}== 