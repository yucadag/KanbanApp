ö3
\C:\TFSProjects\KanbanApp\KanbanApp.Core\DataAccess\EntityFramework\EfEntityRepositoryBase.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 

DataAccess #
.# $
EntityFramework$ 3
{		 
public

 

class

 "
EfEntityRepositoryBase

 '
<

' (
TEntity

( /
>

/ 0
:

1 2
IEntityRepository

3 D
<

D E
TEntity

E L
>

L M
where 
TEntity 
: 
class 
, 
IEntity &
,& '
new( +
(+ ,
), -
{ 
private 
readonly 
	DbContext "
_context# +
;+ ,
public "
EfEntityRepositoryBase %
(% &
	DbContext& /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
TEntity 
Get 
( 

Expression %
<% &
Func& *
<* +
TEntity+ 2
,2 3
bool4 8
>8 9
>9 :
filter; A
)A B
{ 	
return 
_context 
. 
Set 
<  
TEntity  '
>' (
(( )
)) *
.* +
SingleOrDefault+ :
(: ;
filter; A
)A B
;B C
} 	
public 
List 
< 
TEntity 
> 
GetList $
($ %

Expression% /
</ 0
Func0 4
<4 5
TEntity5 <
,< =
bool> B
>B C
>C D
filterE K
=L M
nullN R
)R S
{ 	
return   
filter   
==   
null   !
?!! 
_context!! 
.!! 
Set!! 
<!! 
TEntity!! &
>!!& '
(!!' (
)!!( )
.!!) *
ToList!!* 0
(!!0 1
)!!1 2
:"" 
_context"" 
."" 
Set"" 
<"" 
TEntity"" &
>""& '
(""' (
)""( )
."") *
Where""* /
(""/ 0
filter""0 6
)""6 7
.""7 8
ToList""8 >
(""> ?
)""? @
;""@ A
}$$ 	
public&& 
TEntity&& 
Add&& 
(&& 
TEntity&& "
entity&&# )
)&&) *
{'' 	
var)) 
addedEntity)) 
=)) 
_context)) &
.))& '
Entry))' ,
()), -
entity))- 3
)))3 4
;))4 5
addedEntity** 
.** 
State** 
=** 
EntityState**  +
.**+ ,
Added**, 1
;**1 2
_context++ 
.++ 
SaveChanges++  
(++  !
)++! "
;++" #
return,, 
entity,, 
;,, 
}.. 	
public00 
void00 
Update00 
(00 
TEntity00 "
entity00# )
)00) *
{11 	
var33 
updatedEntity33 
=33 
_context33  (
.33( )
Entry33) .
(33. /
entity33/ 5
)335 6
;336 7
updatedEntity44 
.44 
State44 
=44  !
EntityState44" -
.44- .
Modified44. 6
;446 7
_context55 
.55 
SaveChanges55  
(55  !
)55! "
;55" #
}77 	
public99 
void99 
Delete99 
(99 
TEntity99 "
entity99# )
)99) *
{:: 	
var<< 
deleteEntity<< 
=<< 
_context<< '
.<<' (
Entry<<( -
(<<- .
entity<<. 4
)<<4 5
;<<5 6
deleteEntity== 
.== 
State== 
===  
EntityState==! ,
.==, -
Deleted==- 4
;==4 5
_context>> 
.>> 
SaveChanges>>  
(>>  !
)>>! "
;>>" #
}@@ 	
publicBB 
asyncBB 
TaskBB 
<BB 
TEntityBB !
>BB! "
GetAsyncBB# +
(BB+ ,

ExpressionBB, 6
<BB6 7
FuncBB7 ;
<BB; <
TEntityBB< C
,BBC D
boolBBE I
>BBI J
>BBJ K
filterBBL R
=BBS T
nullBBU Y
)BBY Z
{CC 	
returnEE 
awaitEE 
_contextEE %
.EE% &
SetEE& )
<EE) *
TEntityEE* 1
>EE1 2
(EE2 3
)EE3 4
.EE4 5 
SingleOrDefaultAsyncEE5 I
(EEI J
filterEEJ P
)EEP Q
;EEQ R
}GG 	
publicII 
TaskII 
<II 
ListII 
<II 
TEntityII  
>II  !
>II! "
GetListAsyncII# /
(II/ 0

ExpressionII0 :
<II: ;
FuncII; ?
<II? @
TEntityII@ G
,IIG H
boolIII M
>IIM N
>IIN O
filterIIP V
=IIW X
nullIIY ]
)II] ^
{JJ 	
throwKK 
newKK #
NotImplementedExceptionKK -
(KK- .
)KK. /
;KK/ 0
}LL 	
publicNN 
TaskNN 
<NN 
TEntityNN 
>NN 
AddAsyncNN %
(NN% &
TEntityNN& -
entityNN. 4
)NN4 5
{OO 	
throwPP 
newPP #
NotImplementedExceptionPP -
(PP- .
)PP. /
;PP/ 0
}QQ 	
publicSS 
TaskSS 
UpdateAsyncSS 
(SS  
TEntitySS  '
entitySS( .
)SS. /
{TT 	
throwUU 
newUU #
NotImplementedExceptionUU -
(UU- .
)UU. /
;UU/ 0
}VV 	
publicXX 
TaskXX 
DeleteAsyncXX 
(XX  
TEntityXX  '
entityXX( .
)XX. /
{YY 	
throwZZ 
newZZ #
NotImplementedExceptionZZ -
(ZZ- .
)ZZ. /
;ZZ/ 0
}[[ 	
}\\ 
}]] ª
GC:\TFSProjects\KanbanApp\KanbanApp.Core\DataAccess\IEntityRepository.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 

DataAccess #
{ 
public 

	interface 
IEntityRepository &
<& '
T' (
>( )
where* /
T0 1
:1 2
class2 7
,8 9
IEntity9 @
,@ A
newA D
(D E
)E F
{		 
T

 	
Get


 
(

 

Expression

 
<

 
Func

 
<

 
T

 
,

  
bool

  $
>

$ %
>

% &
filter

' -
=

- .
null

. 2
)

2 3
;

3 4
Task 
< 
T 
> 
GetAsync 
( 

Expression #
<# $
Func$ (
<( )
T) *
,* +
bool, 0
>0 1
>1 2
filter3 9
=: ;
null< @
)@ A
;A B
List 
< 
T 
> 
GetList 
( 

Expression "
<" #
Func# '
<' (
T( )
,) *
bool+ /
>/ 0
>0 1
filter2 8
=9 :
null; ?
)? @
;@ A
Task 
< 
List 
< 
T 
> 
> 
GetListAsync "
(" #

Expression# -
<- .
Func. 2
<2 3
T3 4
,4 5
bool6 :
>: ;
>; <
filter= C
=D E
nullF J
)J K
;K L
T 	
Add
 
( 
T 
entity 
) 
; 
Task 
< 
T 
> 
AddAsync 
( 
T 
entity !
)! "
;" #
void 
Update 
( 
T 
entity 
) 
; 
Task 
UpdateAsync 
( 
T 
entity !
)! "
;" #
void 
Delete 
( 
T 
entity 
) 
; 
Task 
DeleteAsync 
( 
T 
entity !
)! "
;" #
} 
} ç
AC:\TFSProjects\KanbanApp\KanbanApp.Core\DataAccess\IUnitOfWork.cs
	namespace 	
	KanbanApp
 
. 
Core 
. 

DataAccess #
{ 
public 

	interface 
IUnitOfWork  
{ 
Task 
CompleteAsync 
( 
) 
; 
} 
}		 ˘
2C:\TFSProjects\KanbanApp\KanbanApp.Core\IEntity.cs
	namespace 	
	KanbanApp
 
. 
Core 
{ 
public 	
	interface
 
IEntity 
{ 
} 
} 